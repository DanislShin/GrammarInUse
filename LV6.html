<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Be Verb Translation Quiz with Recording</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 10px;
        box-sizing: border-box;
      }

      .container {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 900px;
        min-width: 280px;
        text-align: left;
        box-sizing: border-box;
      }

      h1 {
        text-align: center;
        color: #333;
        font-size: 1.5em;
        margin-bottom: 20px;
      }

      .question {
        margin: 20px 0;
        font-size: 1em;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .korean {
        font-size: 0.9em;
        color: #666;
      }

      .answer-container {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .answer {
        display: none;
        color: #2c3e50;
        font-style: italic;
      }

      .show-answer {
        padding: 5px 10px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9em;
      }

      .show-answer:hover {
        background-color: #2980b9;
      }

      input[type="text"] {
        padding: 5px;
        font-size: 0.95em;
        width: 100%;
        max-width: 600px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
      }

      .recording-controls {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      button {
        padding: 5px 10px;
        font-size: 0.9em;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        color: white;
      }

      .record-btn {
        background-color: #e74c3c;
      }

      .record-btn.recording {
        background-color: #c0392b;
        animation: pulse 1s infinite;
      }

      .record-btn:hover:not(.recording) {
        background-color: #c0392b;
      }

      .stop-btn {
        background-color: #f39c12;
      }

      .stop-btn:hover {
        background-color: #e67e22;
      }

      .play-btn {
        background-color: #2ecc71;
      }

      .play-btn:hover {
        background-color: #27ae60;
      }

      .download-btn {
        background-color: #8e44ad;
      }

      .download-btn:hover {
        background-color: #732d91;
      }

      #submit-btn {
        width: 100%;
        padding: 12px;
        background-color: #4caf50;
        font-size: 1em;
        margin-top: 20px;
      }

      #submit-btn:hover {
        background-color: #45a049;
      }

      .results {
        margin-top: 20px;
        font-size: 0.95em;
        color: #333;
        word-wrap: break-word;
      }

      .correct {
        color: green;
      }

      .incorrect {
        color: red;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 15px;
        }
        h1 {
          font-size: 1.2em;
        }
        .question {
          margin: 15px 0;
        }
        .korean {
          font-size: 0.85em;
        }
        input[type="text"],
        button {
          font-size: 0.9em;
        }
        .recording-controls {
          flex-direction: column;
        }
        #submit-btn {
          padding: 10px;
        }
      }

      @media (min-width: 901px) {
        h1 {
          font-size: 1.8em;
        }
        .question {
          font-size: 1.1em;
        }
        .korean {
          font-size: 1em;
        }
        input[type="text"],
        button {
          font-size: 1em;
        }
        #submit-btn {
          font-size: 1.1em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Be Verb Translation Quiz with Recording</h1>
      <form id="quizForm">
        <div class="question">
          <div class="korean">1. 저는 학생이에요.</div>
          <input
            type="text"
            name="q1"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(1)">
              Show Answer
            </button>
            <span class="answer" id="answer1">I am a student.</span>
          </div>
          <div class="recording-controls" id="controls1"></div>
        </div>
        <div class="question">
          <div class="korean">2. 그녀는 제 친구가 아니에요.</div>
          <input
            type="text"
            name="q2"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(2)">
              Show Answer
            </button>
            <span class="answer" id="answer2">She is not my friend.</span>
          </div>
          <div class="recording-controls" id="controls2"></div>
        </div>
        <div class="question">
          <div class="korean">3. 그들은 선생님인가요?</div>
          <input
            type="text"
            name="q3"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(3)">
              Show Answer
            </button>
            <span class="answer" id="answer3">Are they teachers?</span>
          </div>
          <div class="recording-controls" id="controls3"></div>
        </div>
        <div class="question">
          <div class="korean">4. 저는 의사가 아니죠?</div>
          <input
            type="text"
            name="q4"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(4)">
              Show Answer
            </button>
            <span class="answer" id="answer4">Am I not a doctor?</span>
          </div>
          <div class="recording-controls" id="controls4"></div>
        </div>
        <div class="question">
          <div class="korean">5. 그는 키가 커요.</div>
          <input
            type="text"
            name="q5"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(5)">
              Show Answer
            </button>
            <span class="answer" id="answer5">He is tall.</span>
          </div>
          <div class="recording-controls" id="controls5"></div>
        </div>
        <div class="question">
          <div class="korean">6. 우리는 한국 사람이 아니에요.</div>
          <input
            type="text"
            name="q6"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(6)">
              Show Answer
            </button>
            <span class="answer" id="answer6">We are not from Korea.</span>
          </div>
          <div class="recording-controls" id="controls6"></div>
        </div>
        <div class="question">
          <div class="korean">7. 준비 되셨나요?</div>
          <input
            type="text"
            name="q7"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(7)">
              Show Answer
            </button>
            <span class="answer" id="answer7">Are you ready?</span>
          </div>
          <div class="recording-controls" id="controls7"></div>
        </div>
        <div class="question">
          <div class="korean">8. 그녀는 당신의 여동생이에요.</div>
          <input
            type="text"
            name="q8"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(8)">
              Show Answer
            </button>
            <span class="answer" id="answer8">She is your sister.</span>
          </div>
          <div class="recording-controls" id="controls8"></div>
        </div>
        <div class="question">
          <div class="korean">9. 그들은 집에 있지 않아요.</div>
          <input
            type="text"
            name="q9"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button type="button" class="show-answer" onclick="toggleAnswer(9)">
              Show Answer
            </button>
            <span class="answer" id="answer9">They are not at home.</span>
          </div>
          <div class="recording-controls" id="controls9"></div>
        </div>
        <div class="question">
          <div class="korean">10. 당신은 선생님이 아니죠?</div>
          <input
            type="text"
            name="q10"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(10)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer10">Are you not a teacher?</span>
          </div>
          <div class="recording-controls" id="controls10"></div>
        </div>
        <div class="question">
          <div class="korean">11. 그들은 행복하지 않아요.</div>
          <input
            type="text"
            name="q11"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(11)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer11">They are not happy.</span>
          </div>
          <div class="recording-controls" id="controls11"></div>
        </div>
        <div class="question">
          <div class="korean">12. 저는 거미를 두려워해요.</div>
          <input
            type="text"
            name="q12"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(12)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer12">I am afraid of spiders.</span>
          </div>
          <div class="recording-controls" id="controls12"></div>
        </div>
        <div class="question">
          <div class="korean">13. 그녀는 예술에 흥미가 있나요?</div>
          <input
            type="text"
            name="q13"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(13)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer13">Is she interested in art?</span>
          </div>
          <div class="recording-controls" id="controls13"></div>
        </div>
        <div class="question">
          <div class="korean">14. 그들은 40살이에요.</div>
          <input
            type="text"
            name="q14"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(14)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer14">They are 40 years old.</span>
          </div>
          <div class="recording-controls" id="controls14"></div>
        </div>
        <div class="question">
          <div class="korean">15. 그녀는 25살이 아니에요.</div>
          <input
            type="text"
            name="q15"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(15)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer15">She is not 25 years old.</span>
          </div>
          <div class="recording-controls" id="controls15"></div>
        </div>
        <div class="question">
          <div class="korean">16. 저는 30살인가요?</div>
          <input
            type="text"
            name="q16"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(16)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer16">Am I 30 years old?</span>
          </div>
          <div class="recording-controls" id="controls16"></div>
        </div>
        <div class="question">
          <div class="korean">17. 제 이름은 존이 아니에요.</div>
          <input
            type="text"
            name="q17"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(17)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer17">My name is not John.</span>
          </div>
          <div class="recording-controls" id="controls17"></div>
        </div>
        <div class="question">
          <div class="korean">18. 당신의 이름이 존인가요?</div>
          <input
            type="text"
            name="q18"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(18)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer18">Is my name John?</span>
          </div>
          <div class="recording-controls" id="controls18"></div>
        </div>
        <div class="question">
          <div class="korean">19. 우리는 한국 사람이 아니죠?</div>
          <input
            type="text"
            name="q19"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(19)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer19">Are we not from Korea?</span>
          </div>
          <div class="recording-controls" id="controls19"></div>
        </div>
        <div class="question">
          <div class="korean">20. 그는 키가 크지 않죠?</div>
          <input
            type="text"
            name="q20"
            placeholder="Write the English sentence"
          />
          <div class="answer-container">
            <button
              type="button"
              class="show-answer"
              onclick="toggleAnswer(20)"
            >
              Show Answer
            </button>
            <span class="answer" id="answer20">Is he not tall?</span>
          </div>
          <div class="recording-controls" id="controls20"></div>
        </div>
        <button type="submit" id="submit-btn">Submit</button>
      </form>
      <div id="results" class="results"></div>
    </div>

    <script>
      // Recording functionality
      const recordings = {};
      let mediaRecorder;
      let audioChunks = [];

      function setupRecordingControls(questionNum) {
        const controls = document.getElementById(`controls${questionNum}`);
        controls.innerHTML = `
          <button class="record-btn" onclick="startRecording(${questionNum})">Record</button>
          <button class="stop-btn" onclick="stopRecording(${questionNum})" disabled>Stop</button>
          <button class="play-btn" onclick="playRecording(${questionNum})" disabled>Play</button>
          <button class="download-btn" onclick="downloadRecording(${questionNum})" disabled>Download</button>
        `;
      }

      async function startRecording(questionNum) {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({
            audio: true,
          });
          const mimeType = MediaRecorder.isTypeSupported("audio/mp4")
            ? "audio/mp4"
            : "audio/webm";
          mediaRecorder = new MediaRecorder(stream, { mimeType });
          audioChunks = [];

          mediaRecorder.ondataavailable = (event) => {
            audioChunks.push(event.data);
          };

          mediaRecorder.onstop = () => {
            const audioBlob = new Blob(audioChunks, { type: mimeType });
            recordings[questionNum] = audioBlob;

            const controls = document.getElementById(`controls${questionNum}`);
            const recordBtn = controls.querySelector(".record-btn");
            recordBtn.textContent = "Record";
            recordBtn.classList.remove("recording");
            recordBtn.disabled = false;
            controls.querySelector(".stop-btn").disabled = true;
            controls.querySelector(".play-btn").disabled = false;
            controls.querySelector(".download-btn").disabled = false;
          };

          mediaRecorder.start();
          const controls = document.getElementById(`controls${questionNum}`);
          const recordBtn = controls.querySelector(".record-btn");
          recordBtn.textContent = "Recording...";
          recordBtn.classList.add("recording");
          recordBtn.disabled = true;
          controls.querySelector(".stop-btn").disabled = false;
          controls.querySelector(".play-btn").disabled = true;
          controls.querySelector(".download-btn").disabled = true;
        } catch (error) {
          alert(
            "Unable to start recording. Please ensure microphone access is allowed.\nError: " +
              error.message
          );
        }
      }

      function stopRecording(questionNum) {
        if (mediaRecorder && mediaRecorder.state !== "inactive") {
          mediaRecorder.stop();
          mediaRecorder.stream.getTracks().forEach((track) => track.stop());
        }
      }

      function playRecording(questionNum) {
        if (recordings[questionNum]) {
          const audioUrl = URL.createObjectURL(recordings[questionNum]);
          const audio = new Audio(audioUrl);
          audio
            .play()
            .catch((error) => alert("Playback failed: " + error.message));
        }
      }

      function downloadRecording(questionNum) {
        if (recordings[questionNum]) {
          const audioUrl = URL.createObjectURL(recordings[questionNum]);
          const a = document.createElement("a");
          a.href = audioUrl;
          a.download = `recording_q${questionNum}.${
            recordings[questionNum].type.split("/")[1]
          }`;
          a.click();
          URL.revokeObjectURL(audioUrl);
        }
      }

      // Show/hide answer
      function toggleAnswer(questionNum) {
        const answer = document.getElementById(`answer${questionNum}`);
        answer.style.display =
          answer.style.display === "inline" ? "none" : "inline";
      }

      // Quiz submission
      document.addEventListener("DOMContentLoaded", function () {
        for (let i = 1; i <= 20; i++) {
          setupRecordingControls(i);
        }

        document
          .getElementById("quizForm")
          .addEventListener("submit", function (event) {
            event.preventDefault();

            const answers = {
              q1: "I am a student.",
              q2: "She is not my friend.",
              q3: "Are they teachers?",
              q4: "Am I not a doctor?",
              q5: "He is tall.",
              q6: "We are not from Korea.",
              q7: "Are you ready?",
              q8: "She is your sister.",
              q9: "They are not at home.",
              q10: "Are you not a teacher?",
              q11: "They are not happy.",
              q12: "I am afraid of spiders.",
              q13: "Is she interested in art?",
              q14: "They are 40 years old.",
              q15: "She is not 25 years old.",
              q16: "Am I 30 years old?",
              q17: "My name is not John.",
              q18: "Is my name John?",
              q19: "Are we not from Korea?",
              q20: "Is he not tall?",
            };

            const correctSentences = {
              q1: { en: "I am a student.", ko: "저는 학생이에요." },
              q2: {
                en: "She is not my friend.",
                ko: "그녀는 제 친구가 아니에요.",
              },
              q3: { en: "Are they teachers?", ko: "그들은 선생님인가요?" },
              q4: { en: "Am I not a doctor?", ko: "저는 의사가 아니죠?" },
              q5: { en: "He is tall.", ko: "그는 키가 커요." },
              q6: {
                en: "We are not from Korea.",
                ko: "우리는 한국 사람이 아니에요.",
              },
              q7: { en: "Are you ready?", ko: "준비 되셨나요?" },
              q8: {
                en: "She is your sister.",
                ko: "그녀는 당신의 여동생이에요.",
              },
              q9: {
                en: "They are not at home.",
                ko: "그들은 집에 있지 않아요.",
              },
              q10: {
                en: "Are you not a teacher?",
                ko: "당신은 선생님이 아니죠?",
              },
              q11: { en: "They are not happy.", ko: "그들은 행복하지 않아요." },
              q12: {
                en: "I am afraid of spiders.",
                ko: "저는 거미를 두려워해요.",
              },
              q13: {
                en: "Is she interested in art?",
                ko: "그녀는 예술에 흥미가 있나요?",
              },
              q14: { en: "They are 40 years old.", ko: "그들은 40살이에요." },
              q15: {
                en: "She is not 25 years old.",
                ko: "그녀는 25살이 아니에요.",
              },
              q16: { en: "Am I 30 years old?", ko: "저는 30살인가요?" },
              q17: {
                en: "My name is not John.",
                ko: "제 이름은 존이 아니에요.",
              },
              q18: { en: "Is my name John?", ko: "당신의 이름이 존인가요?" },
              q19: {
                en: "Are we not from Korea?",
                ko: "우리는 한국 사람이 아니죠?",
              },
              q20: { en: "Is he not tall?", ko: "그는 키가 크지 않죠?" },
            };

            const userAnswers = {};
            for (let i = 1; i <= 20; i++) {
              userAnswers[`q${i}`] = document
                .querySelector(`input[name="q${i}"]`)
                .value.trim();
            }

            let score = 0;
            let resultHTML = "<h3>Results:</h3><ul>";

            for (let i = 1; i <= 20; i++) {
              const questionId = `q${i}`;
              const userAnswer = userAnswers[questionId].toLowerCase();
              const correctAnswer = answers[questionId].toLowerCase();
              const correctEn = correctSentences[questionId].en;
              const correctKo = correctSentences[questionId].ko;

              if (userAnswer === correctAnswer) {
                resultHTML += `<li class="correct">Question ${i}: Correct! "${correctEn}" (${correctKo})</li>`;
                score++;
              } else {
                resultHTML += `<li class="incorrect">Question ${i}: Incorrect. You wrote: "${userAnswer}". Correct answer: "${correctEn}" (${correctKo})</li>`;
              }
            }

            resultHTML += `</ul><p>Your score: ${score} out of 20 (${
              (score / 20) * 100
            }%)</p>`;
            document.getElementById("results").innerHTML = resultHTML;
          });
      });
    </script>
  </body>
</html>
